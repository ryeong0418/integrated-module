WITH BASE AS (SELECT INST_ID, SHARED_POOL_SIZE_FOR_ESTIMATE, SHARED_POOL_SIZE_FACTOR, ESTD_LC_TIME_SAVED, ESTD_LC_MEMORY_OBJECT_HITS
                FROM GV$SHARED_POOL_ADVICE
               WHERE SHARED_POOL_SIZE_FACTOR = 1)
SELECT Y.INST_ID,
	   Y.SHARED_POOL_SIZE_FOR_ESTIMATE || 'MB' SHARED_POOL_SIZE,
	   Y.LC_TIME_SAVED || '%' LC_TIME_SAVED
FROM (
SELECT X.*,
	   ROW_NUMBER() OVER(PARTITION BY X.INST_ID ORDER BY X.LC_TIME_SAVED DESC,SHARED_POOL_SIZE_FOR_ESTIMATE ASC) RNK
FROM (SELECT A.INST_ID,
			 A.SHARED_POOL_SIZE_FOR_ESTIMATE,
			 ROUND((A.ESTD_LC_TIME_SAVED-B.ESTD_LC_TIME_SAVED)*100/B.ESTD_LC_TIME_SAVED,2) LC_TIME_SAVED
		FROM GV$SHARED_POOL_ADVICE A, BASE B
	   WHERE A.INST_ID = B.INST_ID) X) Y
WHERE Y.RNK = 1