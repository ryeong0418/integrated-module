WITH BASE AS (SELECT INST_ID, SHARED_POOL_SIZE_FOR_ESTIMATE, SHARED_POOL_SIZE_FACTOR, ESTD_LC_TIME_SAVED, ESTD_LC_MEMORY_OBJECT_HITS
                FROM GV$SHARED_POOL_ADVICE
               WHERE SHARED_POOL_SIZE_FACTOR = 1)
SELECT Y.INST_ID, Y.SHARED_POOL_SIZE, Y.LC_TIME_SAVED, Y.LC_MEMORY_OBJECT_HIT
FROM (SELECT X.*,
	   ROW_NUMBER() OVER(PARTITION BY X.INST_ID, X.ROUND_SHARED_POOL_SIZE ORDER BY X.SHARED_POOL_SIZE_FACTOR) RNK
FROM (SELECT A.INST_ID,
			 A.SHARED_POOL_SIZE_FACTOR,
			 A.SHARED_POOL_SIZE_FOR_ESTIMATE,
			 DECODE(MOD(ROUND(A.SHARED_POOL_SIZE_FACTOR,1)*10,2),1,ROUND(A.SHARED_POOL_SIZE_FACTOR,1)-0.1,ROUND(A.SHARED_POOL_SIZE_FACTOR,1)) ROUND_SHARED_POOL_SIZE,
			 ROUND(A.SHARED_POOL_SIZE_FOR_ESTIMATE,1) || DECODE(A.SHARED_POOL_SIZE_FACTOR,1,'MB(CURRENT)','MB') SHARED_POOL_SIZE,
			 ROUND((A.ESTD_LC_TIME_SAVED-B.ESTD_LC_TIME_SAVED)*100/B.ESTD_LC_TIME_SAVED,2) || '%' LC_TIME_SAVED,
			 ROUND((A.ESTD_LC_MEMORY_OBJECT_HITS-B.ESTD_LC_MEMORY_OBJECT_HITS)*100/B.ESTD_LC_MEMORY_OBJECT_HITS,2) || '%' LC_MEMORY_OBJECT_HIT
		FROM GV$SHARED_POOL_ADVICE A, BASE B
	   WHERE A.INST_ID = B.INST_ID
		 AND A.SHARED_POOL_SIZE_FACTOR >= 1) X) Y
WHERE Y.RNK = 1
ORDER BY Y.INST_ID, Y.SHARED_POOL_SIZE_FOR_ESTIMATE