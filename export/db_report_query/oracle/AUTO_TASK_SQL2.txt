select WINDOW_NAME, TO_CHAR(WINDOW_START_TIME,'YYYY-MM-DD HH24:MI:SS') as WINDOW_START_TIME, CLIENT_NAME, TO_CHAR(JOB_START_TIME,'YYYY-MM-DD HH24:MI:SS') as JOB_START_TIME, JOB_DURATION, JOB_STATUS
from (select WINDOW_NAME,
WINDOW_START_TIME,
CLIENT_NAME,
JOB_START_TIME,
JOB_DURATION,
JOB_STATUS,
row_number() over(order by WINDOW_START_TIME desc) rnk
from DBA_AUTOTASK_JOB_HISTORY
where CLIENT_NAME = 'auto optimizer stats collection')
where rnk <= 5
order by rnk desc